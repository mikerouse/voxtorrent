(()=>{function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}document.addEventListener("alpine:init",(function(){Alpine.data("WepSpotlightComponent",(function(t){var i;return{tokens:window.Livewire.find(t).$entangle("activeTokens",!0),active:window.Livewire.find(t).$entangle("active",!0),selectedGroup:0,selectedItem:-1,query:window.Livewire.find(t).$entangle("query",!0),listeners:[],input:(i={},e(i,"x-ref","input"),e(i,"@keydown.backspace",(function(){""===this.$el.value&&this.tokens.length>0&&(this.$wire.popScope(),this.selectedGroup=0,this.selectedItem=-1,this.focus())})),e(i,"@keydown.arrow-up",(function(e){e.preventDefault(),this.selectUp()})),e(i,"@keydown.arrow-down",(function(e){e.preventDefault(),this.selectDown()})),e(i,"@keydown.enter",(function(e){e.preventDefault(),this.select()})),e(i,"@keydown.tab",(function(e){e.preventDefault(),this.selectionHasTokens()&&(this.applyScope(),this.resetQuery())})),e(i,"@keyup.tab",(function(e){e.preventDefault()})),i),init:function(){var e=this;this.$watch("query",(function(){e.selectedItem=0,e.selectedGroup=0})),this.$watch("active",(function(){e.active&&e.focus()})),this.listeners.push(Livewire.on("spotlight.toggle",(function(t){e.toggle(t)})))},destroy:function(){this.listeners.forEach((function(e){e()}))},focus:function(){var e=this;setTimeout((function(){e.$focus.focus(e.$refs.input)}),100)},close:function(){this.active=!1},toggle:function(e){null!=e&&e.query&&(this.query=e.query),this.active=!this.active},resetQuery:function(){this.query="",this.selectedItem=0,this.selectedGroup=0,this.focus()},resetScope:function(){this.$wire.clearScope(),this.focus()},selection:function(){var e,t,i,n=null===(i=(null!==(e=null===(t=this.$refs.resultGroups)||void 0===t?void 0:t.children)&&void 0!==e?e:[])[this.selectedGroup])||void 0===i?void 0:i.querySelectorAll("ul>li")[this.selectedItem];return n?Alpine.$data(n):null},selectionHasTokens:function(){var e,t;return 0!==(null===(e=this.selection())||void 0===e||null===(t=e.tokens)||void 0===t?void 0:t.length)},select:function(){this.$wire.runAction(this.selection().action)},applyScope:function(){var e=this;this.$wire.applyTokens(this.selection().tokens),this.$nextTick((function(){e.$focus.focus(e.$refs.input)}))},selectUp:function(){var e=this,t=this.$refs.resultGroups.children;Math.max(0,this.selectedItem-1)===this.selectedItem?(this.selectedGroup=this.selectedGroup-1==-1?t.length-1:Math.min(t.length-1,this.selectedGroup-1),this.selectedItem=t[this.selectedGroup].querySelectorAll("ul>li").length-1):this.selectedItem=Math.min(t[this.selectedGroup].querySelectorAll("ul>li").length-1,this.selectedItem-1),this.$nextTick((function(){var i;null===(i=t[e.selectedGroup].querySelectorAll("ul>li")[e.selectedItem-1])||void 0===i||i.scrollIntoView({block:"nearest"})}))},selectDown:function(){var e=this,t=this.$refs.resultGroups.children;Math.min(t[this.selectedGroup].querySelectorAll("ul>li").length-1,this.selectedItem+1)===this.selectedItem?(this.selectedGroup=t.length-1===this.selectedGroup?0:Math.min(t.length-1,this.selectedGroup+1),this.selectedItem=0):this.selectedItem=Math.min(t[this.selectedGroup].querySelectorAll("ul>li").length-1,this.selectedItem+1),this.$nextTick((function(){var i;null===(i=t[e.selectedGroup].querySelectorAll("ul>li")[e.selectedItem+1])||void 0===i||i.scrollIntoView({block:"nearest"})}))}}}))}))})();